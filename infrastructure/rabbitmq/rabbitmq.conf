# =============================================================================
# RabbitMQ Configuration for IvyArc Spring Cloud Microservices
# =============================================================================

# Cluster and Node Settings
cluster_formation.peer_discovery_backend = classic_config
cluster_formation.classic_config.nodes.1 = rabbit@rabbitmq

# Network and Connectivity
listeners.tcp.default = 5672
management.tcp.port = 15672
management.tcp.ip = 0.0.0.0

# Default Virtual Host
default_vhost = ivyarc
default_user = admin
default_pass = admin123

# Permissions
default_permissions.configure = .*
default_permissions.read = .*
default_permissions.write = .*

# User Management
default_user_tags.administrator = true
loopback_users.guest = false

# Memory and Disk Management
vm_memory_high_watermark.relative = 0.6
disk_free_limit.absolute = 2GB

# Message TTL and Queue Settings
default_message_ttl = 86400000
queue_master_locator = min-masters

# Logging
log.console = true
log.console.level = info
log.file.level = info
log.connection.level = info
log.channel.level = info
log.queue.level = info
log.exchange.level = info
log.binding.level = info

# Management Plugin
management.load_definitions = /etc/rabbitmq/definitions.json
management.rates_mode = basic

# TLS/SSL (disabled for development)
listeners.ssl = none

# Heartbeat and Connection Settings
heartbeat = 60
connection_max = 1000
channel_max = 2000

# Federation and Shovel (if needed)
auth_mechanisms.1 = PLAIN
auth_mechanisms.2 = AMQPLAIN

# Prometheus Monitoring
prometheus.tcp.port = 15692
prometheus.tcp.ip = 0.0.0.0

# Performance Settings
collect_statistics = fine
collect_statistics_interval = 5000

# Background GC Settings
background_gc_enabled = true
background_gc_target_interval = 60000